!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("phylocanvas"));else if("function"==typeof define&&define.amd)define(["phylocanvas"],t);else{var n=t("object"==typeof exports?require("phylocanvas"):e.phylocanvas);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e(this,"createTree",function(e,t){var n=e.apply(void 0,o(t)),r=a(t,2),i=r[1],s=void 0===i?{}:i;if(s.history||"undefined"==typeof s.history){var c=s.history&&"undefined"!=typeof s.history.collapsed;n.historySnapshots=[],n.history=new y(n,c?s.history.collapsed:!0)}return n}),e(c.Tree,"resizeToContainer",function(e){return this.history?void this.history.resizeTree():e.apply(this)}),this.History=y}var a=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(c){r=!0,i=c}finally{try{!o&&s["return"]&&s["return"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var c=n(1),l=n(2),d=l.dom.addClass,u=l.dom.hasClass,p=l.dom.removeClass,h=l.events.fireEvent,f=l.events.addEvent,v=l.events.killEvent,y=function(){function e(t,n){var o=this;r(this,e),this.tree=t,this.injectCss(),this.div=this.createDiv(t.containerElement),this.tree.addListener("subtree",function(e){var t=e.node;return o.addSnapshot(t)}),this.tree.addListener("loaded",function(){return o.addSnapshot(o.tree.root.id)}),this.tree.addListener("typechanged",function(){return o.addSnapshot(o.tree.root.id)}),n?this.collapse():this.expand()}return s(e,[{key:"collapse",value:function(){d(this.div,"collapsed"),this.toggleDiv.firstChild.data=">",this.resizeTree(),this.tree.draw()}},{key:"expand",value:function(){p(this.div,"collapsed"),this.toggleDiv.firstChild.data="<",this.resizeTree(),this.tree.draw()}},{key:"isCollapsed",value:function(){return u(this.div,"collapsed")}},{key:"toggle",value:function(){this.isCollapsed()?this.expand():this.collapse(),h(this.tree.containerElement,"historytoggle",{isOpen:!this.isCollapsed()})}},{key:"createDiv",value:function(e){var t=document.createElement("div");t.className="pc-history",f(t,"click",v),f(t,"contextmenu",v);var n=document.createElement("div");n.innerHTML="History",n.className="pc-history-title",t.appendChild(n);var o=document.createElement("div");o.appendChild(document.createTextNode("<")),o.className="toggle",f(o,"click",this.toggle.bind(this)),t.appendChild(o),this.toggleDiv=o;var r=document.createElement("ul");return r.className="pc-history-snapshots",t.appendChild(r),this.snapshotList=r,e.appendChild(t),t}},{key:"resizeTree",value:function(){var e=this.tree;this.width=this.div.offsetWidth,e.setSize(e.containerElement.offsetWidth-this.width,e.containerElement.offsetHeight),this.isCollapsed()?e.containerElement.getElementsByTagName("canvas")[0].style.marginLeft=this.width+"px":e.containerElement.getElementsByTagName("canvas")[0].style.marginLeft="20%"}},{key:"addSnapshot",value:function(e){var t="phylocanvas-history-",n=this.tree.treeType,o=!1;if(this.tree.historySnapshots.forEach(function(r){r.style.background="transparent",r.id===t+e&&r.getAttribute("data-tree-type")===n&&(o=!0,r.style.background="lightblue")}),!o){var r=this.tree.getPngUrl(),i=document.createElement("li"),a=document.createElement("img");a.width=this.width,a.src=r,a.id=t+e,a.setAttribute("data-tree-type",this.tree.treeType),a.style.background="lightblue",this.tree.historySnapshots.push(a),i.appendChild(a),this.snapshotList.appendChild(i),f(a,"click",this.goBackTo.bind(this))}}},{key:"clear",value:function(){for(var e=this.snapshotList.getElementsByTagName("li"),t=e.length;t--;)this.snapshotList.removeChild(e[0]);this.tree.historySnapshots.length=0}},{key:"goBackTo",value:function(e){var t=e.target,n=t.id.replace("phylocanvas-history-","");this.tree.setTreeType(t.getAttribute("data-tree-type"),!0),this.tree.redrawFromBranch(this.tree.originalTree.branches[n])}},{key:"injectCss",value:function(){var e=".pc-history { position: absolute; top: 0; bottom: 0; left: 0; box-sizing: border-box; width: 20%; overflow: hidden; background: #EEE }.pc-history .pc-history-title { box-sizing: border-box; height: 20px; text-align: center; font-size: 13px; color: #666; padding: 2px; border-bottom: 1px solid #bbb }.pc-history .toggle { position: absolute; top: 0; right: 0; padding: 2px 8px; cursor: pointer; border-top-left-radius: 50%; border-bottom-left-radius: 50%; background-color: #666; color: #FFF; box-sizing: border-box; height: 20px; }.pc-history.collapsed .toggle { border-radius: 0 50% 50% 0 }.pc-history .toggle:hover { background-color: #FFF; color: #CCC }.pc-history.collapsed { width: 25px }.pc-history.collapsed .pc-history-snapshots { display: none }.pc-history.collapsed .pc-history-title { writing-mode: sideways-rl; -webkit-writing-mode: vertical-rl; margin-top: 30px; background: 0 0; color: #666; letter-spacing: 1.2px; border-bottom: none }.pc-history-snapshots { position: absolute; top: 20px; bottom: 0; margin: 0; padding: 0; overflow-x: hidden; overflow-y: scroll; }.pc-history-snapshots li { list-style: outside none none }.pc-history img { border: 0px solid #CCC; border-top-width: 1px; cursor: pointer; width: 100%; box-sizing: border-box; transition: background-color .25s ease; display: block }.pc-history img:hover { background-color: #fff }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}]),e}()},function(t,n){t.exports=e},function(e,t,n){var o,r,i;(function(e){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}!function(a,s){if("object"==n(t)&&"object"==n(e))e.exports=s();else{r=[],o=s,i="function"==typeof o?o.apply(t,r):o,!(void 0!==i&&(e.exports=i))}}(void 0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.events=t.dom=t.constants=t.canvas=void 0;var r=n(1),i=o(r),a=n(4),s=o(a),c=n(2),l=o(c),d=n(3),u=o(d);t.canvas=i,t.constants=s,t.dom=l,t.events=u},function(e,t,n){function o(e){return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1}function r(e){return(window.devicePixelRatio||1)/o(e)}function i(e){return e=e-(0,c.getX)(this.canvas.canvas)+window.pageXOffset,e*=r(this.canvas),e-=this.canvas.canvas.width/2,e-=this.offsetx,e/=this.zoom}function a(e){return e=e-(0,c.getY)(this.canvas.canvas)+window.pageYOffset,e*=r(this.canvas),e-=this.canvas.canvas.height/2,e-=this.offsety,e/=this.zoom}function s(e,t,n){return[i.call(n,e),a.call(n,t)]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBackingStorePixelRatio=o,t.getPixelRatio=r,t.translateClick=s;var c=n(2)},function(e,t,n){function o(e){var t=arguments.length<=1||void 0===arguments[1]?"text/plain;charset=utf-8":arguments[1],n=new Blob([e],{type:t});return u.createObjectURL(n)}function r(e,t){var n=document.createElement("a"),o="undefined"!=typeof n.download;n.href=e,n.target="_blank",o&&(n.download=t),(0,d.fireEvent)(n,"click"),o&&u.revokeObjectURL(n.href)}function i(e){for(var t=0;e;)t+=e.offsetLeft,e=e.offsetParent;return t}function a(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}function s(e,t){var n=e.className.split(" ");-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" "))}function c(e,t){var n=e.className.split(" "),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}function l(e,t){var n=e.className.split(" "),o=n.indexOf(t);return-1!==o}Object.defineProperty(t,"__esModule",{value:!0}),t.createBlobUrl=o,t.setupDownloadLink=r,t.getX=i,t.getY=a,t.addClass=s,t.removeClass=c,t.hasClass=l;var d=n(3),u=window.URL||window.webkitURL},function(e,t){function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":"undefined"==typeof e?"undefined":n(e)}function r(e){return e.preventDefault(),!1}function i(e,t){var n,o,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):(n=document.createEventObject(),n.eventType=t),n.eventName=t;for(o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);document.createEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n)}function a(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){return n.call(e,window.event)})}function s(e){e.stopPropagation(),e.preventDefault()}function c(e,t){var n;return n=("undefined"==typeof t?"undefined":o(t))===o("aaa")?function(n){return e[t]?e[t](n):void 0}:function(){return t(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefault=r,t.fireEvent=i,t.addEvent=a,t.killEvent=s,t.createHandler=c},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Angles={FORTYFIVE:Math.PI/4,QUARTER:Math.PI/2,HALF:Math.PI,FULL:2*Math.PI},t.Shapes={x:"star",s:"square",o:"circle",t:"triangle"}}])})}).call(t,n(3)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});